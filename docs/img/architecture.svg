<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="360" viewBox="0 0 900 360">
  <style>
    .box { fill:#0b1226; stroke:#2dd4bf; stroke-width:2; rx:6; }
    .text { fill:#e6f9f1; font-family: Inter, Arial, sans-serif; font-size:14px }
    .small { font-size:12px; fill:#9bdacb }
    .arrow { stroke:#94f4e0; stroke-width:2; fill:none; marker-end:url(#arrow); }
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="#94f4e0" />
    </marker>
  </defs>

  <!-- Nodes -->
  <rect x="40" y="40" width="160" height="60" class="box"/>
  <text x="120" y="70" class="text" text-anchor="middle">KMV UI</text>
  <text x="120" y="88" class="small" text-anchor="middle">(Next.js)</text>

  <rect x="300" y="30" width="200" height="80" class="box"/>
  <text x="400" y="58" class="text" text-anchor="middle">Local API</text>
  <text x="400" y="76" class="small" text-anchor="middle">(Node/Express)</text>

  <rect x="580" y="20" width="120" height="50" class="box"/>
  <text x="640" y="45" class="text" text-anchor="middle">LLM</text>
  <text x="640" y="61" class="small" text-anchor="middle">Provider</text>

  <rect x="300" y="140" width="140" height="60" class="box"/>
  <text x="370" y="170" class="text" text-anchor="middle">Apply Service</text>

  <rect x="500" y="140" width="220" height="80" class="box"/>
  <text x="610" y="168" class="text" text-anchor="middle">Vault Filesystem</text>
  <text x="610" y="186" class="small" text-anchor="middle">routing.yaml, vault.json, notes</text>

  <rect x="40" y="160" width="160" height="60" class="box"/>
  <text x="120" y="190" class="text" text-anchor="middle">Prompt Refinement</text>
  <text x="120" y="208" class="small" text-anchor="middle">PRS</text>

  <rect x="40" y="260" width="160" height="60" class="box"/>
  <text x="120" y="290" class="text" text-anchor="middle">Audit Service</text>

  <!-- Arrows -->
  <!-- UI -> API -->
  <path class="arrow" d="M200,70 L300,70" />
  <!-- API -> LLM -->
  <path class="arrow" d="M500,55 L580,45" />
  <!-- API -> Apply -->
  <path class="arrow" d="M400,110 L400,140" />
  <!-- Apply -> Vault FS -->
  <path class="arrow" d="M440,170 L500,170" />
  <!-- PRS -> API (feed refined prompt) -->
  <path class="arrow" d="M200,190 L300,70" />
  <!-- Apply -> Audit (log write) -->
  <path class="arrow" d="M370,200 L120,260" />
</svg>
